-- ============================================================================
-- STARR Surveying — ACC SRVY 2339: GPS/GIS Applications in Surveying
-- ============================================================================
-- Austin Community College Geospatial Engineering course:
--   SRVY 2339 - GPS/GIS Applications (3 SCH)
--
-- An introduction to Global Navigation Satellite Systems (GNSS) and
-- Geographic Information Systems (GIS) as applied to land surveying.
-- Topics include: GPS/GNSS theory and signal structure, satellite
-- geometry and error sources, coordinate systems and datums (NAD83,
-- WGS84, ITRF), geoid models, static and kinematic GPS methods,
-- Real-Time Kinematic (RTK) surveying, network RTK and VRS, GPS
-- survey planning, post-processing, CORS and OPUS, GIS fundamentals,
-- spatial data models, and integration of GPS data into GIS/CAD.
--
-- Textbook: "GPS for Land Surveyors" by Jan Van Sickle (4th ed.)
--   or "Global Navigation Satellite Systems" by Teunissen/Montenbruck
--
-- Prerequisite: SRVY 1341
--
-- ACC semesters are 16 weeks. Each module has:
--   - 14 weekly lessons (weeks without exams)
--   - 1 midterm exam (Week 8)
--   - 1 final exam (Week 16)
--   - Weekly quizzes (5 questions each, non-exam weeks)
--   - Weekly homework sets (3 questions each, non-exam weeks)
--
-- Run AFTER supabase_schema.sql and supabase_seed_curriculum.sql
-- Safe to re-run (uses upserts and delete-then-insert patterns).
-- ============================================================================

BEGIN;

-- ============================================================================
-- SECTION 1: MODULE DEFINITION (order_index 33)
-- ============================================================================

INSERT INTO learning_modules (id, title, description, difficulty, estimated_hours, order_index, status, tags, xp_reward, created_at, updated_at)
VALUES
  ('acc00005-0000-0000-0000-000000000005',
   'ACC SRVY 2339 — GPS/GIS Applications in Surveying',
   'Austin Community College SRVY 2339 (3 SCH). An introduction to Global Navigation Satellite Systems (GNSS) and Geographic Information Systems (GIS) as applied to land surveying. Topics include GPS/GNSS fundamentals and signal structure, satellite constellations (GPS, GLONASS, Galileo, BeiDou), satellite geometry and dilution of precision (DOP), error sources and mitigation, coordinate systems and datums (NAD83, WGS84, ITRF), ellipsoids, geoid models and orthometric heights, static and rapid-static GPS methods, Real-Time Kinematic (RTK) surveying, network RTK and Virtual Reference Stations (VRS), GPS survey planning with mission planning software, post-processing with baseline solutions, the National CORS network and OPUS, GIS fundamentals including spatial data models (vector and raster), coordinate transformations, and integration of GNSS data into CAD and GIS workflows. This course provides the technical foundation for modern positioning technology used in professional surveying practice. Prerequisite: SRVY 1341. Textbook: GPS for Land Surveyors by Jan Van Sickle.',
   'advanced', 48.0, 33, 'published',
   ARRAY['acc','srvy-2339','gps','gnss','gis','satellite','rtk','college-course','semester'],
   500, now(), now())

ON CONFLICT (id) DO UPDATE SET
  title           = EXCLUDED.title,
  description     = EXCLUDED.description,
  difficulty      = EXCLUDED.difficulty,
  estimated_hours = EXCLUDED.estimated_hours,
  order_index     = EXCLUDED.order_index,
  status          = EXCLUDED.status,
  tags            = EXCLUDED.tags,
  xp_reward       = EXCLUDED.xp_reward,
  updated_at      = now();


-- ============================================================================
-- SECTION 2: LESSONS (16 weeks — 14 lessons + 2 exam weeks)
-- ============================================================================

DELETE FROM learning_lessons WHERE module_id = 'acc00005-0000-0000-0000-000000000005';
INSERT INTO learning_lessons (id, module_id, title, content, key_takeaways, order_index, estimated_minutes, resources, videos, tags, status)
VALUES
  -- Week 1
  ('acc05b01-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 1: Introduction to Satellite Positioning and GNSS Overview',
   'History of satellite positioning: from Transit (Navy Navigation Satellite System) through GPS development by the U.S. Department of Defense. The three segments of GPS: space segment (satellite constellation), control segment (monitor stations and master control), and user segment (receivers). Overview of global GNSS constellations: GPS (United States, 31+ satellites, 6 orbital planes), GLONASS (Russia, 24 satellites, 3 orbital planes), Galileo (European Union, 30 planned satellites), BeiDou (China, 35+ satellites including GEO and MEO). Satellite-Based Augmentation Systems (SBAS): WAAS (US), EGNOS (Europe), MSAS (Japan). Why GNSS has revolutionized land surveying: centimeter-level positioning, no line-of-sight between stations required, all-weather operation, 24/7 availability.',
   ARRAY['Describe the three segments of GPS','Identify the four major GNSS constellations and their characteristics','Explain how satellite positioning has changed surveying practice','Distinguish between GNSS and GPS terminology','Understand the role of SBAS augmentation systems'],
   1, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-1','gnss','overview','constellations','history'], 'published'),

  -- Week 2
  ('acc05b02-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 2: GPS Signal Structure and Satellite Orbits',
   'GPS signal components: carrier waves (L1 at 1575.42 MHz, L2 at 1227.60 MHz, L5 at 1176.45 MHz), pseudorandom noise (PRN) codes (C/A code on L1, P(Y) code on L1 and L2), and the navigation message. How GPS measures distance: code-based (pseudorange) measurement vs carrier-phase measurement. Pseudorange computation: time of transmission × speed of light = range (but with clock errors, hence "pseudo"). Carrier-phase measurement: more precise but ambiguous (integer ambiguity problem). Satellite orbits: MEO at approximately 20,200 km altitude, orbital period of 11 hours 58 minutes (half a sidereal day), 55° inclination. Almanac vs ephemeris data: almanac provides approximate orbital parameters for all satellites; ephemeris provides precise orbital data for a single satellite.',
   ARRAY['Identify the GPS carrier frequencies (L1, L2, L5) and their purposes','Explain the difference between pseudorange and carrier-phase measurements','Describe the integer ambiguity problem in carrier-phase measurement','Understand satellite orbital parameters','Distinguish between almanac and ephemeris data'],
   2, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-2','signal-structure','carrier-phase','pseudorange','orbits'], 'published'),

  -- Week 3
  ('acc05b03-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 3: GPS Error Sources and Mitigation',
   'Error sources in GPS positioning: satellite clock errors (corrected by control segment), orbital errors (ephemeris errors), ionospheric delay (frequency-dependent, 1-100 meters), tropospheric delay (wet and dry components, 2-25 meters), multipath (reflected signals, 0.5-1+ meters), receiver noise, and antenna phase center variations. Mitigation strategies: dual-frequency receivers eliminate ionospheric delay, tropospheric models (Hopfield, Saastamoinen), multipath-resistant antennas (choke ring, ground plane), long observation sessions, and differential techniques. Selective Availability (SA): the intentional degradation of GPS accuracy that was discontinued on May 1, 2000. Geometric Dilution of Precision (GDOP) and its components: PDOP (position), HDOP (horizontal), VDOP (vertical), TDOP (time). Why good satellite geometry is essential.',
   ARRAY['Identify and quantify the major GPS error sources','Explain how dual-frequency receivers eliminate ionospheric delay','Describe the components of DOP and why geometry matters','Apply mitigation strategies for each error source','Understand why VDOP is typically larger than HDOP'],
   3, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-3','errors','ionosphere','troposphere','multipath','DOP'], 'published'),

  -- Week 4
  ('acc05b04-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 4: Coordinate Systems, Datums, and Projections',
   'Coordinate reference systems used with GPS: Earth-Centered Earth-Fixed (ECEF) Cartesian coordinates (X, Y, Z), geodetic coordinates (latitude, longitude, ellipsoidal height). Reference ellipsoids: WGS84 (used by GPS), GRS80 (used by NAD83 — practically identical to WGS84). The relationship between WGS84 and NAD83: originally coincident, now diverged by about 1-2 meters due to tectonic plate motion. Horizontal datums: NAD27 (Clarke 1866 ellipsoid, non-geocentric), NAD83 (GRS80, geocentric). Datum transformations and why they matter: Molodensky, Helmert 7-parameter. Texas state plane coordinate system: zones, Lambert Conformal Conic projection, central meridians, scale factors, and convergence angles. The combined scale factor and why it matters for ground-to-grid conversions.',
   ARRAY['Distinguish between ECEF, geodetic, and projected coordinates','Explain the relationship between WGS84 and NAD83','Describe the Texas state plane coordinate system zones','Perform basic ground-to-grid distance conversions','Understand why datum selection matters for survey accuracy'],
   4, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-4','coordinates','datums','NAD83','WGS84','state-plane','projections'], 'published'),

  -- Week 5
  ('acc05b05-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 5: Geoid Models and Height Systems',
   'The three height surfaces: ellipsoid, geoid, and topographic (earth''s surface). Ellipsoidal height (h): the height above the reference ellipsoid as measured by GPS — geometric, not related to gravity. Orthometric height (H): height above the geoid (mean sea level surface) — what leveling measures and what is used for engineering. Geoid height (N): the separation between the ellipsoid and the geoid. The fundamental relationship: h = H + N (ellipsoidal height = orthometric height + geoid height). NGS geoid models: GEOID18 (current), GEOID12B (previous). Why GPS alone cannot give orthometric heights without a geoid model. Practical implications: a GPS receiver might show an elevation different from a benchmark elevation by the geoid separation (which varies from about -8 to -53 meters across the continental US). NAVD88 vertical datum. The upcoming modernized NSRS with NATRF2022 and NAPGD2022.',
   ARRAY['Explain the relationship h = H + N','Distinguish between ellipsoidal height and orthometric height','Describe the purpose of geoid models','Apply a geoid model to convert GPS heights to orthometric heights','Understand the NAVD88 vertical datum and the upcoming NSRS modernization'],
   5, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-5','geoid','heights','ellipsoidal','orthometric','NAVD88'], 'published'),

  -- Week 6
  ('acc05b06-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 6: Static GPS Surveying',
   'Static GPS: the highest-accuracy GNSS method for control surveys. Procedure: two or more receivers occupy known and unknown points simultaneously for extended periods (typically 1-4 hours for baselines under 20 km). Session planning: selecting observation windows with good satellite geometry (low PDOP). Equipment setup: tripod centering, antenna height measurement (slant vs vertical), antenna orientation. Observation requirements: minimum 4 satellites, recommended 6+, dual-frequency receivers, 15-30 second recording intervals. Post-processing: downloading data, creating baselines, adjusting the network. Rapid-static: shorter occupation times (5-20 minutes) suitable for shorter baselines. Accuracy expectations: static achieves 3-5 mm + 0.5 ppm horizontal; rapid-static achieves 5-10 mm + 1 ppm. When to use static vs other methods.',
   ARRAY['Describe the static GPS observation procedure','Plan a static GPS session for optimal satellite geometry','Set up GPS equipment with correct antenna height measurement','Understand post-processing requirements for static surveys','Compare static and rapid-static methods for accuracy and efficiency'],
   6, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-6','static-gps','control-surveys','baselines','post-processing'], 'published'),

  -- Week 7
  ('acc05b07-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 7: Real-Time Kinematic (RTK) GPS Surveying',
   'RTK GPS: real-time centimeter-level positioning for production surveying. How RTK works: a base station on a known point transmits corrections to a rover via radio (UHF/VHF) or cellular. The rover resolves integer ambiguities in real time to compute precise positions. RTK initialization: time to first fix (TTFF), fixed vs float solutions. RTK accuracy: typically 1-2 cm horizontal, 2-3 cm vertical with reliable initialization. Equipment components: base receiver and antenna, rover receiver with pole and bipod, data radio or cellular modem, data collector/controller. Field procedures: setting up base on control, configuring radio link, rover initialization, staking out and collecting points. Limitations: baseline length (typically 10-15 km max), radio range, overhead obstructions, ionospheric conditions. Quality indicators: PDOP, number of satellites, fixed vs float, RMS values. When RTK fails: under tree canopy, near buildings, during ionospheric storms.',
   ARRAY['Explain how RTK GPS achieves centimeter-level accuracy in real time','Set up an RTK base station and rover','Distinguish between fixed and float solutions','Identify RTK limitations and troubleshooting strategies','Evaluate RTK quality indicators in the field'],
   7, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-7','RTK','real-time-kinematic','base-rover','initialization'], 'published'),

  -- Week 8: MIDTERM EXAM
  ('acc05b08-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 8: Midterm Exam',
   'Midterm examination covering Weeks 1–7: GNSS overview and constellations, signal structure and satellite orbits, error sources and mitigation, coordinate systems and datums, geoid models and height systems, static GPS surveying, and RTK GPS surveying. Expect conceptual questions on signal processing and error budgets, computation problems involving coordinate conversions and height relationships, and practical questions on field procedures.',
   ARRAY['Review all GNSS fundamentals from Weeks 1-7','Practice coordinate conversion and height computation problems','Review error sources, their magnitudes, and mitigation strategies','Study RTK and static GPS procedures and accuracy specifications'],
   8, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-8','midterm','exam'], 'published'),

  -- Week 9
  ('acc05b09-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 9: Network RTK, VRS, and CORS',
   'Limitations of single-base RTK and how network RTK solves them. Network RTK concepts: a network of continuously operating reference stations (CORS) computes area corrections for atmospheric and orbital errors. Virtual Reference Station (VRS): the network generates a synthetic base station near the rover, sending corrections as if a physical base were there. Other network RTK methods: MAC (Master-Auxiliary Concept), FKP (Flächenkorrekturparameter). Advantages of network RTK: no base station needed, longer effective baselines, more consistent accuracy over the coverage area. Texas CORS networks: the National Geodetic Survey (NGS) CORS network, TxDOT CORS, SmartNet, Topnet. OPUS (Online Positioning User Service): uploading static data to NGS for free post-processed solutions. OPUS-S (static, 2+ hours), OPUS-RS (rapid-static, 15 min-2 hours), OPUS-Projects (multi-station adjustments).',
   ARRAY['Explain how network RTK overcomes single-base RTK limitations','Describe how a Virtual Reference Station works','Identify available CORS networks in Texas','Use OPUS for post-processed static positioning','Compare VRS, MAC, and FKP network RTK methods'],
   9, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-9','network-RTK','VRS','CORS','OPUS'], 'published'),

  -- Week 10
  ('acc05b10-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 10: GPS Survey Planning and Mission Planning',
   'Planning a GPS survey: project requirements analysis, accuracy needs, method selection (static, rapid-static, RTK, network RTK). Mission planning software: predicting satellite availability, PDOP windows, elevation mask angles. Site reconnaissance for GPS: identifying obstructions (buildings, tree canopy, power lines), multipath sources, and access. Control requirements: connecting to existing geodetic control (NGS monuments, local control), verifying control quality. Session planning for static surveys: simultaneous occupation schedules, session duration, independent baselines, trivial baselines, and redundancy. Network design: creating a well-connected network with geometric strength. Observation logs and metadata: antenna types, heights, start/stop times, observer notes.',
   ARRAY['Plan a GPS survey based on project accuracy requirements','Use mission planning software to predict satellite availability','Design an observation schedule for a static GPS network','Select appropriate GPS method for different survey applications','Identify and document site conditions affecting GPS observations'],
   10, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-10','survey-planning','mission-planning','reconnaissance','network-design'], 'published'),

  -- Week 11
  ('acc05b11-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 11: GPS Data Processing and Network Adjustment',
   'Post-processing GPS observations: downloading data from receivers, selecting processing parameters, computing baselines. Baseline processing: single vs double-differencing, resolving integer ambiguities, evaluating baseline quality (ratio test, RMS). Trivial vs independent baselines in a network. Loop closures as quality checks. Network adjustment: least squares adjustment of the GPS network. Constrained vs minimally constrained adjustments. Evaluating adjustment results: residuals, error ellipses, chi-square test. Combining GPS with conventional measurements: mixed-mode adjustments. Software tools: Trimble Business Center, Leica Infinity, Carlson SurvGNSS. Export formats: RINEX (Receiver Independent Exchange Format), ASCII coordinates, DXF/DWG for CAD.',
   ARRAY['Process GPS baselines using post-processing software','Evaluate baseline quality using ratio test and RMS values','Perform loop closure checks on a GPS network','Understand least squares network adjustment concepts','Export GPS data in standard formats (RINEX, coordinates)'],
   11, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-11','post-processing','baselines','network-adjustment','RINEX'], 'published'),

  -- Week 12
  ('acc05b12-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 12: Introduction to Geographic Information Systems (GIS)',
   'What is GIS: a system for capturing, storing, analyzing, managing, and presenting spatial data. Components of a GIS: hardware, software, data, people, and methods. Spatial data models: vector (points, lines, polygons) vs raster (grid cells/pixels). Attribute data: the non-spatial information linked to spatial features (e.g., parcel number, owner name, area). Coordinate reference systems in GIS: geographic (lat/lon) vs projected (state plane, UTM). GIS software overview: ArcGIS (Esri), QGIS (open source), Google Earth Pro. Data sources for GIS: GPS surveys, aerial imagery, LiDAR, existing maps, census data, county records. The role of GIS in land surveying: parcel mapping, spatial analysis, utility mapping, environmental studies.',
   ARRAY['Define GIS and identify its core components','Distinguish between vector and raster spatial data models','Explain how attribute data links to spatial features','Identify common GIS software platforms','Describe how surveyors use GIS in professional practice'],
   12, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-12','GIS','spatial-data','vector','raster','attributes'], 'published'),

  -- Week 13
  ('acc05b13-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 13: GIS Data Collection, Quality, and Analysis',
   'GPS data collection for GIS: feature collection with attributes, coding systems, data dictionaries. Data quality concepts: accuracy, precision, completeness, consistency, currency. Metadata: data about the data — source, accuracy, coordinate system, date, creator. FGDC metadata standards. Spatial analysis operations: buffering, overlay (union, intersect, clip), proximity analysis, spatial queries. Geocoding: converting addresses to coordinates. Topology: the spatial relationships between features (adjacency, connectivity, containment). Quality assurance/quality control (QA/QC) for GPS-collected GIS data: checking positional accuracy, attribute completeness, and topological integrity.',
   ARRAY['Collect GPS data with attributes for GIS use','Understand spatial data quality concepts and metadata standards','Perform basic spatial analysis operations','Apply QA/QC procedures to GPS-collected data','Explain topology and its importance in GIS data'],
   13, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-13','GIS-data','spatial-analysis','metadata','topology','QA-QC'], 'published'),

  -- Week 14
  ('acc05b14-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 14: Integrating GNSS Data with CAD and GIS Workflows',
   'The survey data pipeline: from field to deliverable. Importing GPS coordinates into CAD software (AutoCAD, MicroStation, Civil 3D). Coordinate transformations: GPS (geographic) to state plane (projected) to ground (local). Scale factor and elevation factor for ground-to-grid conversions. Creating survey drawings from GPS data: points, linework, labels, legal descriptions. Exporting survey data to GIS: shapefiles, geodatabases, GeoJSON, KML. LiDAR and UAV (drone) integration with GNSS: ground control points for photogrammetry, LiDAR point cloud georeferencing. Emerging technologies: PPP (Precise Point Positioning), multi-constellation/multi-frequency receivers, smartphone GNSS, and the future of surveying with real-time PPP and LEO satellite augmentation.',
   ARRAY['Import GPS data into CAD software for survey drawings','Apply coordinate transformations between GPS, state plane, and ground coordinates','Export survey data in GIS-compatible formats','Understand the role of GNSS in UAV/drone and LiDAR workflows','Describe emerging GNSS technologies and their impact on surveying'],
   14, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-14','CAD','integration','transformations','LiDAR','UAV','emerging-tech'], 'published'),

  -- Week 15
  ('acc05b15-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 15: GNSS Best Practices and Comprehensive Review',
   'GPS/GNSS best practices for professional surveying: NGS guidelines for GNSS surveys, TBPELS standards for GPS-derived coordinates, minimum observation requirements, antenna calibration, independent checks. Common GPS mistakes and how to avoid them: wrong antenna height, wrong datum, wrong coordinate system, poor satellite geometry, inadequate occupation time. Professional applications review: boundary surveys with GPS, construction layout with RTK, control surveys with static, topographic mapping with RTK, geodetic densification. Comprehensive review of all course topics with practice problems. Study strategies for SIT/RPLS exam GPS sections.',
   ARRAY['Apply professional best practices for GNSS surveys','Identify and avoid common GPS surveying mistakes','Select the appropriate GNSS method for each survey application','Review all course material for the final exam','Prepare for SIT/RPLS exam GNSS topics'],
   15, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-15','best-practices','review','exam-prep','SIT','RPLS'], 'published'),

  -- Week 16: FINAL EXAM
  ('acc05b16-0000-0000-0000-000000000001', 'acc00005-0000-0000-0000-000000000005',
   'Week 16: Final Exam',
   'Comprehensive final examination covering all course material from Weeks 1–15. Topics include: GNSS constellations and segments, signal structure, error sources and mitigation, coordinate systems and datums, geoid models and heights, static and RTK surveying, network RTK and CORS/OPUS, survey planning, data processing and network adjustment, GIS fundamentals, spatial data and analysis, and GNSS/CAD/GIS integration. Both conceptual questions and computation problems.',
   ARRAY['Review all course concepts comprehensively','Practice coordinate and height conversion problems','Review error sources, accuracies, and field procedures','Study GIS concepts and spatial analysis methods','Focus on weak areas identified during the semester'],
   16, 180, '[]'::jsonb, '[]'::jsonb,
   ARRAY['acc','srvy-2339','week-16','final','exam'], 'published');


-- ============================================================================
-- SECTION 3: QUESTION BANK — Weeks 1-7 (Quiz + Homework)
-- ============================================================================

DELETE FROM question_bank WHERE tags @> ARRAY['acc-srvy-2339'];

-- Week 1 Quiz & Homework
INSERT INTO question_bank (question_text, question_type, options, correct_answer, explanation, difficulty, module_id, lesson_id, exam_category, tags) VALUES
('GPS is operated and maintained by:', 'multiple_choice', '["The United Nations","The U.S. Department of Defense","NASA","The National Geodetic Survey"]'::jsonb, 'The U.S. Department of Defense', 'GPS (Global Positioning System) is a U.S. military system operated by the U.S. Department of Defense (Space Force). It was developed in the 1970s-80s for military navigation and was made available for civilian use.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b01-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-1','quiz','gps-operations']),
('GNSS stands for:', 'multiple_choice', '["Global Navigation System Standard","Global Navigation Satellite System","Geodetic Navigation Satellite Service","Ground Network Surveying System"]'::jsonb, 'Global Navigation Satellite System', 'GNSS (Global Navigation Satellite System) is the umbrella term for all satellite navigation systems. GPS is just one GNSS; others include GLONASS (Russia), Galileo (EU), and BeiDou (China).', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b01-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-1','quiz','gnss-definition']),
('The GPS space segment consists of approximately how many operational satellites?', 'multiple_choice', '["12","24","31+","50"]'::jsonb, '31+', 'The GPS constellation currently has 31+ operational satellites in 6 orbital planes at approximately 20,200 km altitude. The minimum design is 24 satellites, but extras provide redundancy and improved geometry.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b01-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-1','quiz','space-segment']),
('GLONASS is the satellite navigation system operated by:', 'multiple_choice', '["The United States","Russia","The European Union","China"]'::jsonb, 'Russia', 'GLONASS (GLObal NAvigation Satellite System) is Russia''s GNSS. It uses 24 satellites in 3 orbital planes. GLONASS uses FDMA (frequency-division) rather than GPS''s CDMA (code-division) for signal separation.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b01-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-1','quiz','GLONASS']),
('GPS requires line of sight between the base and rover stations to function.', 'true_false', '["True","False"]'::jsonb, 'False', 'GPS does NOT require line of sight between ground stations (unlike conventional surveying). Each receiver independently observes satellites. This is a major advantage of GPS — stations can be placed where convenient, not where intervisible.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b01-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-1','quiz','line-of-sight']),
('List the three segments of GPS and describe the function of each.', 'essay', '[]'::jsonb, 'Space segment (satellites), control segment (ground stations that monitor/update), user segment (receivers)', 'The three GPS segments: (1) Space segment — the satellite constellation orbiting at ~20,200 km, broadcasting positioning signals. (2) Control segment — ground monitoring stations, master control station (Schriever AFB, CO), and ground antennas that track satellites, compute corrections, and upload data. (3) User segment — all GPS receivers (military and civilian) that receive satellite signals and compute positions.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b01-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-1','homework','three-segments']),
('Compare GPS to GLONASS in terms of number of satellites, orbital planes, and signal access method.', 'short_answer', '[]'::jsonb, 'GPS: 31+ satellites, 6 planes, CDMA. GLONASS: 24 satellites, 3 planes, FDMA (transitioning to CDMA).', 'GPS uses 31+ satellites in 6 orbital planes with CDMA (Code Division Multiple Access) — all satellites broadcast on the same frequency but use unique PRN codes. GLONASS uses 24 satellites in 3 orbital planes with FDMA (Frequency Division Multiple Access) — each satellite uses a slightly different frequency. GLONASS is transitioning to CDMA with newer satellites.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b01-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-1','homework','gps-vs-glonass']),
('Explain three advantages that GPS surveying has over conventional (total station) surveying methods.', 'essay', '[]'::jsonb, 'No line of sight needed, all-weather/24-hour operation, faster for large areas, longer range between stations.', 'GPS advantages: (1) No line-of-sight between stations needed — stations can be anywhere with sky visibility. (2) All-weather, 24-hour operation — works in rain, fog, and darkness. (3) Speed and efficiency for large areas — can cover many kilometers without building traverses. (4) Direct georeferenced coordinates in a geodetic datum. (5) Long-range baselines possible (hundreds of km for static). Conventional surveying still excels under canopy, in urban canyons, and for short-range high-precision work.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b01-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-1','homework','gps-advantages']),

-- Week 2 Quiz & Homework
('The GPS L1 carrier frequency is:', 'multiple_choice', '["1227.60 MHz","1176.45 MHz","1575.42 MHz","2400.00 MHz"]'::jsonb, '1575.42 MHz', 'L1 = 1575.42 MHz is the primary GPS carrier frequency. It carries the C/A code (civilian), P(Y) code (military), and the navigation message. L2 = 1227.60 MHz. L5 = 1176.45 MHz.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b02-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-2','quiz','L1-frequency']),
('Carrier-phase measurements are more precise than pseudorange measurements because:', 'multiple_choice', '["They use more satellites","The carrier wavelength (~19 cm) is much shorter than the code chip length (~300 m)","They are not affected by the ionosphere","They do not require a receiver"]'::jsonb, 'The carrier wavelength (~19 cm) is much shorter than the code chip length (~300 m)', 'Carrier-phase measurements resolve position to a fraction of the carrier wavelength (~19 cm for L1), giving millimeter-level precision. Pseudorange uses the C/A code chip length (~300 m), limiting precision to about 1-3 meters even with smoothing.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b02-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-2','quiz','carrier-vs-code']),
('The integer ambiguity problem in GPS refers to:', 'multiple_choice', '["Not knowing which satellites to use","Not knowing the exact number of full carrier wavelengths between satellite and receiver","Uncertainty in the satellite orbits","The receiver clock error"]'::jsonb, 'Not knowing the exact number of full carrier wavelengths between satellite and receiver', 'The carrier-phase measurement gives the fractional phase precisely, but the total number of full wavelengths (integer ambiguity N) is unknown. Resolving N is critical for centimeter-level positioning. This is what RTK initialization solves.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b02-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-2','quiz','integer-ambiguity']),
('GPS satellite orbits are at approximately what altitude?', 'multiple_choice', '["200 km (LEO)","2,000 km","20,200 km (MEO)","35,786 km (GEO)"]'::jsonb, '20,200 km (MEO)', 'GPS satellites orbit at approximately 20,200 km altitude in Medium Earth Orbit (MEO). This altitude results in an orbital period of about 11 hours 58 minutes (half a sidereal day), meaning each satellite appears ~4 minutes earlier each day.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b02-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-2','quiz','orbital-altitude']),
('The navigation message broadcast by GPS satellites contains ephemeris data and satellite health information.', 'true_false', '["True","False"]'::jsonb, 'True', 'The navigation message (broadcast at 50 bps) contains: ephemeris data (precise orbital parameters for the transmitting satellite), almanac data (approximate orbits for all satellites), satellite health status, clock correction parameters, and ionospheric model coefficients.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b02-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-2','quiz','navigation-message']),
('Explain why a GPS receiver needs signals from at least 4 satellites to compute a 3D position.', 'essay', '[]'::jsonb, 'Four unknowns: X, Y, Z coordinates plus receiver clock error. Four equations (one per satellite) are needed to solve four unknowns.', 'A GPS position requires solving four unknowns: three spatial coordinates (X, Y, Z) plus the receiver clock error (dt). Each satellite provides one pseudorange equation: distance = speed_of_light × (time_received - time_transmitted + clock_error). Four equations with four unknowns requires at least 4 satellites. Additional satellites provide redundancy for error detection and improved accuracy.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b02-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-2','homework','four-satellites']),
('What is the difference between almanac and ephemeris data? Which is more accurate?', 'short_answer', '[]'::jsonb, 'Almanac: approximate orbits for all satellites, valid for weeks. Ephemeris: precise orbit for one satellite, valid for 2-4 hours. Ephemeris is more accurate.', 'Almanac data provides approximate orbital parameters for ALL satellites, is valid for weeks/months, and allows the receiver to know roughly where each satellite is for acquisition. Ephemeris data provides precise orbital parameters for ONE satellite, is valid for only 2-4 hours, and is used for actual positioning. Ephemeris accuracy is about 1-2 meters; almanac accuracy is much coarser.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b02-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-2','homework','almanac-ephemeris']),
('The GPS L1 carrier wavelength is approximately 19 cm. If a carrier-phase measurement can resolve to 1% of a wavelength, what is the measurement precision?', 'numeric_input', '[]'::jsonb, '1.9', '19 cm × 0.01 = 0.19 cm ≈ 1.9 mm. This demonstrates why carrier-phase measurements achieve millimeter-level precision.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b02-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-2','homework','wavelength-precision']),

-- Week 3 Quiz & Homework
('The largest GPS error source for single-frequency receivers is:', 'multiple_choice', '["Multipath","Ionospheric delay","Tropospheric delay","Receiver noise"]'::jsonb, 'Ionospheric delay', 'Ionospheric delay is the largest error source, potentially causing 1-100 meters of range error depending on solar activity. It is frequency-dependent, which is why dual-frequency receivers can eliminate it using the L1/L2 combination.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b03-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-3','quiz','ionospheric-delay']),
('Dual-frequency GPS receivers eliminate ionospheric delay because:', 'multiple_choice', '["They are more expensive","The ionosphere affects L1 and L2 differently, allowing the delay to be computed and removed","They have better antennas","They use more satellites"]'::jsonb, 'The ionosphere affects L1 and L2 differently, allowing the delay to be computed and removed', 'The ionosphere is a dispersive medium — it delays signals proportional to 1/f². By measuring the same signal on two frequencies (L1 and L2), the receiver can compute the ionospheric delay exactly and remove it. This is the primary advantage of dual-frequency receivers.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b03-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-3','quiz','dual-frequency']),
('PDOP stands for:', 'multiple_choice', '["Precise Dilution of Positioning","Position Dilution of Precision","Projected Distance of Points","Predicted Direction of Position"]'::jsonb, 'Position Dilution of Precision', 'PDOP (Position Dilution of Precision) is a dimensionless number indicating how satellite geometry affects position accuracy. Lower PDOP is better (1-2 = excellent, 2-5 = good, 5+ = poor). PDOP combines HDOP and VDOP.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b03-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-3','quiz','PDOP']),
('Multipath error occurs when GPS signals reach the receiver via reflections off nearby surfaces.', 'true_false', '["True","False"]'::jsonb, 'True', 'Multipath occurs when GPS signals reflect off buildings, vehicles, fences, or the ground and arrive at the antenna after the direct signal. This causes range measurement errors of 0.5 to several meters. Mitigation includes choke-ring antennas, ground planes, and careful site selection.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b03-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-3','quiz','multipath']),
('A PDOP value of 1.5 indicates:', 'multiple_choice', '["Poor satellite geometry","Excellent satellite geometry","No satellites available","A hardware malfunction"]'::jsonb, 'Excellent satellite geometry', 'PDOP = 1.5 is excellent. The scale is: 1 = ideal, 1-2 = excellent, 2-5 = good, 5-10 = moderate, 10-20 = fair, >20 = poor. Lower PDOP means satellites are well-distributed in the sky, giving the strongest geometry for position computation.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b03-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-3','quiz','PDOP-values']),
('List the major GPS error sources in order from largest to smallest magnitude. For each, state an approximate magnitude and one mitigation strategy.', 'essay', '[]'::jsonb, 'Ionosphere (1-100m, dual-frequency), troposphere (2-25m, models), orbit errors (1-5m, differential), multipath (0.5-1m, choke ring antenna), receiver noise (<1m, averaging).', 'Error sources ranked: (1) Ionospheric delay: 1-100m, mitigated by dual-frequency receivers. (2) Tropospheric delay: 2-25m (mostly dry component), mitigated by atmospheric models. (3) Orbital/ephemeris errors: 1-5m, mitigated by differential techniques and precise ephemeris. (4) Multipath: 0.5-1+ m, mitigated by choke-ring antennas and site selection. (5) Receiver noise/antenna: <1m, mitigated by averaging and quality equipment. Differential GPS cancels most satellite and atmospheric errors common to both receivers.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b03-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-3','homework','error-budget']),
('Explain why VDOP is typically worse (larger) than HDOP.', 'short_answer', '[]'::jsonb, 'Satellites are always above the receiver, never below, creating weaker vertical geometry than horizontal geometry.', 'All GPS satellites are above the receiver — none are below the horizon. This creates an inherent geometric weakness in the vertical direction because the satellite distribution is like an inverted cone rather than a full sphere. Horizontally, satellites can be spread 360° around the receiver, but vertically they only range from the horizon up to directly overhead. This is why GPS vertical accuracy is typically 1.5-2× worse than horizontal.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b03-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-3','homework','VDOP-explanation']),
('What was Selective Availability (SA) and when was it discontinued?', 'short_answer', '[]'::jsonb, 'SA was intentional degradation of GPS accuracy by DoD. Discontinued May 1, 2000. Reduced civilian accuracy from ~100m to ~15m.', 'Selective Availability was the intentional degradation of GPS signals by the U.S. Department of Defense, adding errors to the satellite clock and ephemeris data. SA limited civilian accuracy to about 100 meters. It was turned off on May 1, 2000, by Presidential order, immediately improving civilian accuracy to about 15 meters (standalone). SA is now permanently decommissioned on newer satellites.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b03-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-3','homework','selective-availability']),

-- Week 4 Quiz & Homework
('NAD83 uses which reference ellipsoid?', 'multiple_choice', '["Clarke 1866","GRS80","WGS84","Bessel 1841"]'::jsonb, 'GRS80', 'NAD83 uses the GRS80 (Geodetic Reference System 1980) ellipsoid, which is practically identical to WGS84 (they differ by less than 0.1 mm in the semi-minor axis). NAD27 used the Clarke 1866 ellipsoid.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b04-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-4','quiz','NAD83-ellipsoid']),
('The difference between NAD83 and WGS84 coordinates is currently approximately:', 'multiple_choice', '["Zero — they are identical","1-2 meters","100+ meters","1 kilometer"]'::jsonb, '1-2 meters', 'NAD83 and WGS84 were originally coincident (1987), but have since diverged by about 1-2 meters due to tectonic plate motion. North America moves relative to the global WGS84 frame. This difference matters for high-accuracy work.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b04-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-4','quiz','NAD83-vs-WGS84']),
('Texas state plane coordinates use which map projection?', 'multiple_choice', '["Transverse Mercator","Lambert Conformal Conic","UTM","Polyconic"]'::jsonb, 'Lambert Conformal Conic', 'Texas uses Lambert Conformal Conic (LCC) projection for its state plane coordinate system. LCC is ideal for states that extend primarily east-west. Texas has 5 state plane zones: North, North Central, Central, South Central, and South.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b04-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-4','quiz','texas-state-plane']),
('NAD27 and NAD83 can differ by hundreds of meters at the same location.', 'true_false', '["True","False"]'::jsonb, 'True', 'NAD27 (based on Clarke 1866 ellipsoid, non-geocentric datum origin at Meades Ranch, Kansas) can differ from NAD83 (GRS80, geocentric) by 10 to 300+ meters depending on location. Using the wrong datum is a critical error.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b04-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-4','quiz','NAD27-vs-NAD83']),
('How many state plane zones does Texas have?', 'numeric_input', '[]'::jsonb, '5', 'Texas has 5 state plane zones: North (4201), North Central (4202), Central (4203), South Central (4204), and South (4205). Each zone has its own projection parameters.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b04-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-4','quiz','state-plane-zones']),
('Explain why using the wrong datum can cause significant positioning errors. Give an example.', 'essay', '[]'::jsonb, 'Different datums define the coordinate origin and ellipsoid differently, so the same coordinates in different datums refer to different physical locations.', 'Using the wrong datum causes positioning errors because the same latitude/longitude values in different datums point to physically different locations on the ground. For example, a point at 30°15''00" N, 97°45''00" W in NAD27 could be over 200 meters from the same coordinates in NAD83 in parts of Texas. If GPS data (in NAD83) is plotted on a NAD27 map without transformation, features will appear shifted. This has caused real-world problems including construction errors and property disputes.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b04-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-4','homework','datum-errors']),
('What is a combined scale factor and why does it matter for GPS surveys?', 'short_answer', '[]'::jsonb, 'Combined scale factor = grid scale factor × elevation factor. It converts between ground distances and state plane grid distances.', 'The combined scale factor is the product of the grid scale factor (from the map projection) and the elevation factor (accounting for height above the ellipsoid). It is needed to convert between ground-level measurements and state plane grid distances. If you survey on the ground but map in state plane coordinates, distances will differ unless you apply the combined scale factor. Failure to account for this can cause significant errors in large surveys.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b04-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-4','homework','scale-factor']),
('If a GPS receiver shows coordinates in WGS84 but your project requires NAD83, what should you do?', 'short_answer', '[]'::jsonb, 'Apply a datum transformation (e.g., 14-parameter Helmert) or use the appropriate realization epoch. For most work in CONUS, the difference is 1-2m.', 'You should apply a datum transformation to convert WGS84 coordinates to NAD83. For most survey-grade work, use the appropriate transformation parameters (14-parameter Helmert transformation with epoch). For sub-meter work, the 1-2m difference between WGS84(current) and NAD83(2011) may be acceptable. For centimeter-level work, the specific realization and epoch of both datums must be considered. Most survey-grade GPS software handles this automatically if configured correctly.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b04-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-4','homework','datum-transformation']),

-- Week 5 Quiz & Homework
('The relationship between ellipsoidal height (h), orthometric height (H), and geoid height (N) is:', 'multiple_choice', '["h = H - N","h = H + N","H = h + N","N = H + h"]'::jsonb, 'h = H + N', 'The fundamental height relationship: h = H + N, where h = ellipsoidal height (GPS), H = orthometric height (leveling/NAVD88), N = geoid height (separation). Rearranged: H = h - N.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b05-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-5','quiz','height-relationship']),
('GPS directly measures which type of height?', 'multiple_choice', '["Orthometric height","Geoid height","Ellipsoidal height","Mean sea level height"]'::jsonb, 'Ellipsoidal height', 'GPS measures ellipsoidal height (h) — the geometric distance above the reference ellipsoid. This is NOT the same as elevation above mean sea level. A geoid model is required to convert to orthometric height (H = h - N).', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b05-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-5','quiz','ellipsoidal-height']),
('The geoid is best described as:', 'multiple_choice', '["A perfect sphere","The physical surface of the earth","An equipotential surface of gravity that approximates mean sea level","The reference ellipsoid"]'::jsonb, 'An equipotential surface of gravity that approximates mean sea level', 'The geoid is the equipotential surface of Earth''s gravity field that best fits global mean sea level. It is an irregular surface that reflects variations in mass distribution within the Earth. Water at rest would align with the geoid.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b05-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-5','quiz','geoid-definition']),
('In the continental US, the geoid is generally below the ellipsoid.', 'true_false', '["True","False"]'::jsonb, 'True', 'In CONUS, the geoid height (N) is negative, meaning the geoid is below the WGS84/GRS80 ellipsoid by about 8 to 53 meters. This means ellipsoidal heights from GPS are larger than orthometric heights (elevations) at the same point.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b05-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-5','quiz','geoid-in-US']),
('NAVD88 is a:', 'multiple_choice', '["Horizontal datum","Vertical datum","Satellite system","Map projection"]'::jsonb, 'Vertical datum', 'NAVD88 (North American Vertical Datum of 1988) is the current official vertical datum for the US. It is based on one tidal benchmark (Father Point/Rimouski, Quebec) and a national leveling network adjustment.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b05-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-5','quiz','NAVD88']),
('A GPS receiver shows an ellipsoidal height of 195.3 m at a point. The geoid model shows N = -27.5 m at that location. What is the orthometric height (NAVD88 elevation)?', 'numeric_input', '[]'::jsonb, '222.8', 'H = h - N = 195.3 - (-27.5) = 195.3 + 27.5 = 222.8 m. Note: when N is negative, subtracting it adds to h.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b05-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-5','homework','height-computation']),
('Why can''t GPS alone provide accurate elevations without a geoid model? Explain the difference between the ellipsoid and the geoid.', 'essay', '[]'::jsonb, 'GPS measures height above a mathematical ellipsoid, not above sea level. The geoid (gravity surface) differs from the ellipsoid by up to 100+ meters globally.', 'GPS measures the geometric distance above a mathematical ellipsoid (a smooth, regular surface). But elevation for engineering and mapping purposes is height above the geoid (mean sea level surface). The geoid is irregular due to gravity variations caused by mass distribution within the Earth. In the US, the geoid can be 8-53 meters below the ellipsoid. Without a geoid model (like GEOID18), GPS height is meaningless for engineering. For example, two points with equal ellipsoidal heights could have very different elevations because the geoid undulates between them.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b05-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-5','homework','geoid-explanation']),
('A benchmark has a known NAVD88 elevation of 150.00 m. GPS measures an ellipsoidal height of 118.2 m. What is the geoid height (N) at this location?', 'numeric_input', '[]'::jsonb, '-31.8', 'h = H + N → N = h - H = 118.2 - 150.0 = -31.8 m. The negative value confirms the geoid is below the ellipsoid at this location.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b05-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-5','homework','geoid-computation']),

-- Week 6 Quiz & Homework
('Static GPS achieves horizontal accuracy of approximately:', 'multiple_choice', '["1-3 meters","10-30 cm","3-5 mm + 0.5 ppm","1-2 cm + 1 ppm"]'::jsonb, '3-5 mm + 0.5 ppm', 'Static GPS with extended observation times (1-4+ hours) and dual-frequency receivers achieves 3-5 mm + 0.5 ppm horizontal accuracy, making it the most precise GNSS method for control surveys.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b06-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-6','quiz','static-accuracy']),
('In a static GPS session, "occupation time" refers to:', 'multiple_choice', '["The time to set up the tripod","The total time the receiver collects satellite data at a point","The time between sessions","The satellite pass duration"]'::jsonb, 'The total time the receiver collects satellite data at a point', 'Occupation time is the duration a GPS receiver continuously collects satellite data at a station. For static surveys, typical occupation times range from 1-4 hours for baselines under 20 km, increasing for longer baselines or challenging conditions.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b06-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-6','quiz','occupation-time']),
('Antenna height measurement errors directly affect the:', 'multiple_choice', '["Horizontal position only","Vertical position only","Both horizontal and vertical positions","Neither — the software corrects for it"]'::jsonb, 'Both horizontal and vertical positions', 'An incorrect antenna height directly corrupts the vertical position and also affects the horizontal through the baseline solution geometry. Antenna height errors are one of the most common blunders in GPS surveying — always measure to the ARP (Antenna Reference Point) and record whether it is a slant or vertical measurement.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b06-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-6','quiz','antenna-height']),
('A recording interval of 15 seconds means the receiver stores an observation every 15 seconds.', 'true_false', '["True","False"]'::jsonb, 'True', 'The recording (logging) interval defines how often the receiver stores pseudorange and carrier-phase observations. A 15-second interval is standard for static surveys. Shorter intervals (1-5 seconds) are used for kinematic surveys.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b06-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-6','quiz','recording-interval']),
('Rapid-static GPS differs from static GPS primarily in:', 'multiple_choice', '["The number of satellites tracked","The occupation time (shorter for rapid-static)","The type of receiver used","The accuracy (rapid-static is more accurate)"]'::jsonb, 'The occupation time (shorter for rapid-static)', 'Rapid-static uses shorter occupation times (5-20 minutes vs 1-4 hours) suitable for shorter baselines. It trades some accuracy (5-10 mm + 1 ppm vs 3-5 mm + 0.5 ppm) for significantly improved productivity.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b06-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-6','quiz','rapid-static']),

-- Week 7 Quiz & Homework
('RTK GPS achieves typical horizontal accuracy of:', 'multiple_choice', '["1-3 meters","10-30 cm","1-2 cm","3-5 mm"]'::jsonb, '1-2 cm', 'RTK (Real-Time Kinematic) GPS achieves typical accuracy of 1-2 cm horizontal and 2-3 cm vertical with a reliable fixed solution. This makes it suitable for most survey-grade applications including boundary and topographic surveys.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b07-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-7','quiz','RTK-accuracy']),
('A "fixed" RTK solution means:', 'multiple_choice', '["The receiver is stationary","The integer ambiguities have been resolved","The base station is on a fixed monument","GPS accuracy is fixed at 1 cm"]'::jsonb, 'The integer ambiguities have been resolved', 'A "fixed" solution means the receiver has successfully resolved the integer ambiguities (the unknown number of full carrier wavelengths to each satellite). This is essential for centimeter-level accuracy. A "float" solution has not resolved ambiguities and has decimeter-level accuracy.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b07-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-7','quiz','fixed-solution']),
('The maximum recommended baseline length for single-base RTK is typically:', 'multiple_choice', '["1-2 km","5-7 km","10-15 km","50-100 km"]'::jsonb, '10-15 km', 'Single-base RTK is typically limited to 10-15 km baselines. Beyond this, differential atmospheric errors between base and rover become too large for reliable centimeter-level positioning. Network RTK extends this range.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b07-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-7','quiz','RTK-range']),
('An RTK "float" solution is acceptable for survey-grade boundary work.', 'true_false', '["True","False"]'::jsonb, 'False', 'A float solution has NOT resolved the integer ambiguities and has accuracy of only 10-50 cm — not acceptable for survey-grade boundary work. Only a fixed solution (1-2 cm) meets professional survey standards. Never accept float solutions for control or boundary points.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b07-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-7','quiz','float-unacceptable']),
('RTK GPS requires a data link between the base station and rover.', 'true_false', '["True","False"]'::jsonb, 'True', 'RTK requires real-time transmission of correction data from the base station to the rover. This can be via UHF/VHF radio, cellular modem, or WiFi. Without the data link, the rover cannot compute real-time corrected positions.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b07-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-7','quiz','data-link']),
('Compare RTK and static GPS surveying: when should each method be used? Discuss accuracy, speed, and appropriate applications.', 'essay', '[]'::jsonb, 'Static: highest accuracy (3-5mm), slow, for control networks. RTK: good accuracy (1-2cm), fast, for production surveying, stakeout, topography.', 'Static GPS: highest accuracy (3-5 mm), requires long occupation times (1-4 hours per point), best for geodetic control networks, establishing project control, and high-order surveys. RTK GPS: good accuracy (1-2 cm), positions available in seconds, best for production surveying — boundary points, topographic data collection, construction stakeout. Use static when you need the highest accuracy and have time; use RTK when you need speed with centimeter-level accuracy. Static is post-processed; RTK is real-time.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b07-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-7','homework','RTK-vs-static']),
('You''re performing an RTK survey and the controller shows "FLOAT" instead of "FIXED." List three things you should check.', 'short_answer', '[]'::jsonb, 'Check: satellite count and PDOP, proximity to obstructions, baseline length to base, data link quality', 'When RTK can''t achieve a fixed solution, check: (1) Satellite count — need at least 5-6 with good geometry (low PDOP). (2) Obstructions — tree canopy, buildings, or terrain blocking satellite signals. (3) Baseline length — too far from base station degrades performance. (4) Data link — weak or intermittent radio/cellular connection. (5) Ionospheric conditions — solar activity can prevent ambiguity resolution. Try moving to a clearer area, waiting for better geometry, or restarting the receiver.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b07-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-7','homework','RTK-troubleshooting']),
('Why does RTK accuracy degrade with increasing baseline length?', 'short_answer', '[]'::jsonb, 'Atmospheric conditions differ between base and rover at longer distances, so differential corrections become less effective.', 'RTK accuracy degrades with distance because the atmospheric conditions (ionospheric and tropospheric delays) at the base and rover become increasingly different. Differential corrections assume similar atmospheric errors at both locations. As separation increases, the atmospheric errors decorrelate, leaving uncorrected residual errors that degrade accuracy and make ambiguity resolution more difficult.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b07-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-7','homework','baseline-degradation']);


-- ============================================================================
-- SECTION 4: MIDTERM EXAM QUESTIONS (15 questions covering Weeks 1-7)
-- ============================================================================

INSERT INTO question_bank (question_text, question_type, options, correct_answer, explanation, difficulty, module_id, lesson_id, exam_category, tags) VALUES
('GPS stands for:', 'multiple_choice', '["Global Positioning System","Geodetic Positioning Service","Ground Positioning Standard","Geographic Position Software"]'::jsonb, 'Global Positioning System', 'GPS = Global Positioning System, operated by the U.S. Department of Defense (Space Force).', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','definition']),
('How many satellites are needed for a 3D GPS position fix?', 'multiple_choice', '["2","3","4","6"]'::jsonb, '4', 'Four satellites are needed: three for X, Y, Z coordinates plus one to solve the receiver clock error.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','satellites']),
('The GPS L1 frequency is 1575.42 MHz.', 'true_false', '["True","False"]'::jsonb, 'True', 'L1 = 1575.42 MHz is the primary GPS carrier frequency.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','L1']),
('The largest error source for single-frequency GPS is:', 'multiple_choice', '["Multipath","Ionospheric delay","Receiver noise","User error"]'::jsonb, 'Ionospheric delay', 'Ionospheric delay can cause 1-100m of error and is the dominant error source for single-frequency receivers.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','errors']),
('PDOP of 2.5 indicates:', 'multiple_choice', '["Poor geometry","Good geometry","No satellites visible","System malfunction"]'::jsonb, 'Good geometry', 'PDOP 2-5 is "good." Lower is better. PDOP < 2 is excellent.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','PDOP']),
('NAD83 and WGS84 are currently offset by approximately:', 'multiple_choice', '["They are identical","1-2 meters","100 meters","1 kilometer"]'::jsonb, '1-2 meters', 'NAD83 and WGS84 have diverged by about 1-2 meters due to tectonic plate motion since their original alignment.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','datums']),
('The formula h = H + N relates:', 'multiple_choice', '["Three types of distance","Ellipsoidal height, orthometric height, and geoid height","Latitude, longitude, and elevation","Three GPS error sources"]'::jsonb, 'Ellipsoidal height, orthometric height, and geoid height', 'h (ellipsoidal) = H (orthometric) + N (geoid height). GPS gives h; leveling gives H; the geoid model provides N.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','heights']),
('If GPS measures h = 250.0 m and N = -30.0 m, the orthometric height H is:', 'numeric_input', '[]'::jsonb, '280', 'H = h - N = 250.0 - (-30.0) = 280.0 m.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','height-computation']),
('Static GPS is the most accurate GNSS method, achieving mm-level accuracy.', 'true_false', '["True","False"]'::jsonb, 'True', 'Static GPS with long occupations and post-processing achieves 3-5 mm + 0.5 ppm, the highest GNSS accuracy.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','static-accuracy']),
('RTK requires a data link between base and rover.', 'true_false', '["True","False"]'::jsonb, 'True', 'RTK needs real-time correction data transmitted from base to rover via radio or cellular.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','RTK']),
('A "fixed" RTK solution means:', 'multiple_choice', '["The antenna is fixed to a tripod","Integer ambiguities have been resolved","The position will not change","The base station is permanent"]'::jsonb, 'Integer ambiguities have been resolved', 'Fixed = integer ambiguities resolved = centimeter accuracy. Float = unresolved = decimeter accuracy.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','fixed-solution']),
('Texas state plane coordinates use Lambert Conformal Conic projection.', 'true_false', '["True","False"]'::jsonb, 'True', 'Texas uses LCC projection with 5 zones for its state plane coordinate system.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','state-plane']),
('Multipath is caused by:', 'multiple_choice', '["Solar activity","Signal reflections off nearby surfaces","Too many satellites","Incorrect antenna height"]'::jsonb, 'Signal reflections off nearby surfaces', 'Multipath occurs when satellite signals reflect off buildings, vehicles, or ground surfaces before reaching the antenna.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','multipath']),
('Carrier-phase measurement precision is on the order of:', 'multiple_choice', '["1-3 meters","10-30 cm","1-5 cm","millimeters"]'::jsonb, 'millimeters', 'Carrier-phase resolves to a fraction of the ~19 cm wavelength, giving mm-level measurement precision.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','carrier-phase']),
('The recommended maximum baseline for single-base RTK is:', 'multiple_choice', '["1 km","5 km","10-15 km","100 km"]'::jsonb, '10-15 km', 'Single-base RTK is typically limited to 10-15 km. Beyond this, differential atmospheric errors degrade performance.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b08-0000-0000-0000-000000000001', 'ACC-2339-MIDTERM', ARRAY['acc-srvy-2339','midterm','baseline-length']);


-- ============================================================================
-- SECTION 5: QUESTION BANK — Weeks 9-15
-- ============================================================================

INSERT INTO question_bank (question_text, question_type, options, correct_answer, explanation, difficulty, module_id, lesson_id, exam_category, tags) VALUES
-- Week 9
('Network RTK overcomes single-base RTK limitations by:', 'multiple_choice', '["Using more expensive receivers","Computing area corrections from a network of reference stations","Requiring shorter baselines","Using only L1 signals"]'::jsonb, 'Computing area corrections from a network of reference stations', 'Network RTK uses multiple CORS to model atmospheric and orbital errors across an area. These area corrections allow the rover to work at greater distances from any single reference station with consistent accuracy.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b09-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-9','quiz','network-RTK']),
('OPUS stands for:', 'multiple_choice', '["Online Positioning User Service","Orbital Processing Unit System","Optimal Position Using Satellites","Official Positioning Utility Standard"]'::jsonb, 'Online Positioning User Service', 'OPUS (Online Positioning User Service) is a free service from NGS that processes static GPS data using nearby CORS stations. Users upload their RINEX data and receive processed coordinates in NAD83.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b09-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-9','quiz','OPUS']),
('A Virtual Reference Station (VRS) is a physical station near the rover.', 'true_false', '["True","False"]'::jsonb, 'False', 'A VRS is NOT physical — it is a synthetic (virtual) reference station generated by the network software near the rover''s position. The network computes what corrections would look like from that virtual location and sends them to the rover.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b09-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-9','quiz','VRS']),
('CORS stations operate:', 'multiple_choice', '["Only during business hours","24 hours a day, 7 days a week","Only when requested by users","During satellite passes only"]'::jsonb, '24 hours a day, 7 days a week', 'CORS (Continuously Operating Reference Stations) run 24/7, continuously collecting GNSS data. This data is used for post-processing (OPUS) and real-time corrections (network RTK).', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b09-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-9','quiz','CORS']),

-- Week 10
('The primary purpose of GPS mission planning is to:', 'multiple_choice', '["Choose the cheapest equipment","Identify observation windows with good satellite geometry","Plan the office party","Select the fastest route to the site"]'::jsonb, 'Identify observation windows with good satellite geometry', 'Mission planning predicts satellite positions and DOP values throughout the day, allowing the surveyor to schedule observations during periods of optimal satellite geometry (low PDOP, good sky distribution).', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b10-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-10','quiz','mission-planning']),
('An elevation mask of 15° means the receiver ignores satellites below 15° above the horizon.', 'true_false', '["True","False"]'::jsonb, 'True', 'An elevation mask (cutoff angle) of 15° instructs the receiver to reject signals from satellites below 15° elevation. Low-elevation satellites pass through more atmosphere, increasing errors. Standard mask is 10-15°.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b10-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-10','quiz','elevation-mask']),

-- Week 11
('RINEX is a standard format for:', 'multiple_choice', '["CAD drawings","GPS observation data exchange between different receivers","GIS databases","Survey plats"]'::jsonb, 'GPS observation data exchange between different receivers', 'RINEX (Receiver Independent Exchange Format) is the standard format for exchanging raw GPS observation data between different receiver brands. This allows processing data from mixed equipment.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b11-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-11','quiz','RINEX']),
('A loop closure in GPS network processing checks for:', 'multiple_choice', '["The number of satellites","Consistency of baseline solutions around a closed figure","The antenna height","The receiver battery level"]'::jsonb, 'Consistency of baseline solutions around a closed figure', 'Loop closures check that baselines around a closed polygon (loop) are self-consistent. The sum of baseline components around a loop should theoretically be zero. Large misclosures indicate blunders or poor baseline solutions.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b11-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-11','quiz','loop-closure']),

-- Week 12
('In GIS, vector data represents features as:', 'multiple_choice', '["Grid cells with values","Points, lines, and polygons","Satellite images","Text documents"]'::jsonb, 'Points, lines, and polygons', 'Vector data uses points (wells, monuments), lines (roads, utilities, streams), and polygons (parcels, buildings, lakes) to represent geographic features. Each feature can have associated attribute data.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b12-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-12','quiz','vector-data']),
('Raster data is best suited for representing:', 'multiple_choice', '["Property boundaries","Continuous surfaces like elevation or temperature","Individual survey monuments","Road centerlines"]'::jsonb, 'Continuous surfaces like elevation or temperature', 'Raster data (grids of cells/pixels) is ideal for continuous phenomena: elevation (DEM), temperature, precipitation, satellite imagery, and land cover. Vector data is better for discrete features like boundaries and roads.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b12-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-12','quiz','raster-data']),
('Attribute data in a GIS is:', 'multiple_choice', '["The coordinate positions of features","Non-spatial information linked to spatial features","The map projection","The file format"]'::jsonb, 'Non-spatial information linked to spatial features', 'Attribute data describes the characteristics of spatial features. For a parcel polygon: owner name, acreage, zoning, assessed value. For a monument point: type, date set, coordinates, surveyor. Attributes are stored in a database table linked to the geometry.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b12-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-12','quiz','attribute-data']),

-- Week 13
('Metadata in GIS refers to:', 'multiple_choice', '["The largest dataset","Data about the data — source, accuracy, date, coordinate system","The most important layer","Extra data that can be deleted"]'::jsonb, 'Data about the data — source, accuracy, date, coordinate system', 'Metadata documents data quality and provenance: who created it, when, how, what coordinate system, what accuracy, completeness, and limitations. FGDC standards define required metadata elements.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b13-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-13','quiz','metadata']),
('A buffer operation in GIS creates:', 'multiple_choice', '["A copy of the data","A zone of specified distance around a feature","A backup file","A faster processing environment"]'::jsonb, 'A zone of specified distance around a feature', 'Buffering creates a polygon representing all area within a specified distance of a feature. Example: a 50-foot buffer around a stream creates a polygon showing the 50-foot setback zone.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b13-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-13','quiz','buffer']),

-- Week 14
('The combined scale factor accounts for:', 'multiple_choice', '["Only the map projection","Both map projection distortion and elevation above the ellipsoid","Only the elevation","The curvature of the earth only"]'::jsonb, 'Both map projection distortion and elevation above the ellipsoid', 'Combined scale factor = grid scale factor (projection) × elevation factor (height). Both must be considered when converting between ground distances and state plane grid distances.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b14-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-14','quiz','combined-scale-factor']),
('PPP (Precise Point Positioning) differs from differential GPS because PPP uses:', 'multiple_choice', '["A base station","Precise satellite orbit and clock products instead of a base station","Less expensive equipment","Only one satellite"]'::jsonb, 'Precise satellite orbit and clock products instead of a base station', 'PPP uses precise satellite orbits and clocks (from IGS or similar) to achieve centimeter-level accuracy with a single receiver — no base station needed. This is emerging technology for surveying applications.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b14-0000-0000-0000-000000000001', 'ACC-2339', ARRAY['acc-srvy-2339','week-14','quiz','PPP']);


-- ============================================================================
-- SECTION 6: FINAL EXAM QUESTIONS (20 questions comprehensive)
-- ============================================================================

INSERT INTO question_bank (question_text, question_type, options, correct_answer, explanation, difficulty, module_id, lesson_id, exam_category, tags) VALUES
('The three segments of GPS are space, control, and:', 'multiple_choice', '["Ground","User","Satellite","Communication"]'::jsonb, 'User', 'Space segment (satellites), control segment (ground monitoring/upload), user segment (all receivers).', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','segments']),
('Galileo is the GNSS operated by:', 'multiple_choice', '["Russia","China","The European Union","Japan"]'::jsonb, 'The European Union', 'Galileo is the EU''s GNSS, designed for civilian control with 30 planned satellites.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','Galileo']),
('Dual-frequency receivers eliminate:', 'multiple_choice', '["All GPS errors","Ionospheric delay","Tropospheric delay","Multipath"]'::jsonb, 'Ionospheric delay', 'Dual-frequency eliminates ionospheric delay by exploiting its frequency-dependent nature.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','dual-frequency']),
('VDOP is usually larger than HDOP because:', 'multiple_choice', '["The receiver is defective","Satellites are only above, never below, creating weaker vertical geometry","Vertical measurements use fewer satellites","The troposphere only affects vertical"]'::jsonb, 'Satellites are only above, never below, creating weaker vertical geometry', 'No satellites below the horizon means vertical geometry is inherently weaker than horizontal.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','VDOP']),
('NAD27 used which ellipsoid?', 'multiple_choice', '["GRS80","WGS84","Clarke 1866","Bessel"]'::jsonb, 'Clarke 1866', 'NAD27 used the Clarke 1866 ellipsoid with a non-geocentric datum origin at Meades Ranch, Kansas.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','NAD27']),
('GPS measures ellipsoidal height, not orthometric height.', 'true_false', '["True","False"]'::jsonb, 'True', 'GPS gives ellipsoidal height (h). Orthometric height (H) requires a geoid model: H = h - N.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','height-type']),
('If h = 180.5 m and N = -25.3 m, then H = ?', 'numeric_input', '[]'::jsonb, '205.8', 'H = h - N = 180.5 - (-25.3) = 205.8 m.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','height-calculation']),
('Static GPS achieves _____ accuracy.', 'multiple_choice', '["1-3 meters","10-30 cm","3-5 mm + 0.5 ppm","1-2 cm"]'::jsonb, '3-5 mm + 0.5 ppm', 'Static GPS with long occupations achieves the highest GNSS accuracy: 3-5 mm + 0.5 ppm.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','static']),
('An RTK float solution is acceptable for boundary surveys.', 'true_false', '["True","False"]'::jsonb, 'False', 'Float solutions (~10-50 cm accuracy) are NOT acceptable for boundary surveys. Only fixed solutions (1-2 cm) meet professional standards.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','float']),
('VRS generates a synthetic reference station near the:', 'multiple_choice', '["CORS network center","Nearest city","Rover position","Equator"]'::jsonb, 'Rover position', 'VRS creates a virtual base station near the rover''s approximate position to minimize baseline-dependent errors.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','VRS']),
('OPUS processes GPS data using:', 'multiple_choice', '["RTK corrections","Nearby CORS stations","Cell phone towers","User-supplied base data only"]'::jsonb, 'Nearby CORS stations', 'OPUS uses the 3 nearest CORS stations to process user-uploaded static GPS data and provide NAD83 coordinates.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','OPUS']),
('Texas has how many state plane zones?', 'numeric_input', '[]'::jsonb, '5', 'Texas has 5 state plane zones: North, North Central, Central, South Central, South.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','zones']),
('Vector GIS data uses points, lines, and polygons.', 'true_false', '["True","False"]'::jsonb, 'True', 'Vector = discrete features as points, lines, polygons. Raster = continuous surfaces as grid cells.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','vector']),
('Metadata is:', 'multiple_choice', '["Data about the data","Extra storage space","A type of satellite","A map projection"]'::jsonb, 'Data about the data', 'Metadata documents data quality, source, date, coordinate system, accuracy, and creator.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','metadata']),
('A buffering operation in GIS creates a zone of specified distance around a feature.', 'true_false', '["True","False"]'::jsonb, 'True', 'Buffering creates an area (polygon) at a specified distance around a point, line, or polygon feature.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','buffering']),
('RINEX is used to exchange GPS data between different receiver brands.', 'true_false', '["True","False"]'::jsonb, 'True', 'RINEX (Receiver Independent Exchange Format) is the standard for sharing raw GPS observation data between different manufacturers'' equipment.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','RINEX']),
('The combined scale factor converts between:', 'multiple_choice', '["Metric and imperial","Ground distances and grid distances","Horizontal and vertical","GPS and GLONASS"]'::jsonb, 'Ground distances and grid distances', 'Combined scale factor (grid × elevation) converts between ground-level measurements and state plane grid distances.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','scale-factor']),
('PPP achieves centimeter accuracy without a base station by using:', 'multiple_choice', '["More satellites","Precise satellite orbits and clock corrections","A larger antenna","Longer observation times only"]'::jsonb, 'Precise satellite orbits and clock corrections', 'PPP uses precise orbit and clock products (from IGS or similar services) to achieve cm-level positioning with a single receiver.', 'hard', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','PPP']),
('One of the most common GPS surveying blunders is:', 'multiple_choice', '["Using too many satellites","Incorrect antenna height measurement","Observing for too long","Using dual-frequency receivers"]'::jsonb, 'Incorrect antenna height measurement', 'Incorrect antenna height is the single most common blunder in GPS surveying. Always measure carefully (slant vs vertical), record the measurement method, and double-check.', 'easy', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','blunders']),
('Name three advantages of network RTK over single-base RTK.', 'short_answer', '[]'::jsonb, 'No base station needed, longer effective range, more consistent accuracy across the coverage area', 'Network RTK advantages: (1) No need to set up your own base station — saves time and equipment. (2) Longer effective range — the network models atmospheric errors over the entire area. (3) More consistent accuracy — corrections are tailored to the rover''s location rather than degrading with distance from a single base. (4) Centralized management and quality control by the network operator.', 'medium', 'acc00005-0000-0000-0000-000000000005', 'acc05b16-0000-0000-0000-000000000001', 'ACC-2339-FINAL', ARRAY['acc-srvy-2339','final','network-RTK-advantages']);


COMMIT;
