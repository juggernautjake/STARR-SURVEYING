-- supabase_seed_acc_content_1341_wk2.sql — Lesson: acc03b02-0000-0000-0000-000000000001
-- Converted from legacy HTML to structured lesson blocks
DELETE FROM lesson_blocks WHERE lesson_id = 'acc03b02-0000-0000-0000-000000000001';
INSERT INTO lesson_blocks (id, lesson_id, block_type, content, order_index, created_at, updated_at)
VALUES
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h2>Week 2: Compass Surveying, DD/DMS Conversions &amp; Chaining Review</h2><p>Before the total station and GPS, the <strong>compass</strong> was one of the surveyor''s most important instruments. Even today, a compass remains essential for reconnaissance work, checking angles in the field, and forestry surveys. This week we study how a compass measures direction, the two systems used to express that direction (bearings and azimuths), the relationship between magnetic north and true north, and a hand-held instrument — the SUUNTO KB-14/360 — that every field surveyor should know how to use. We also cover the critically important skill of converting between <strong>decimal degrees (DD)</strong> and <strong>degrees-minutes-seconds (DMS)</strong>, and wrap up with a quick review of the chaining correction formulas from Week 1.</p>"}'::jsonb, 0, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'divider', '{}'::jsonb, 1, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h3>1. Compass Survey Fundamentals</h3><p>A compass measures the horizontal angle between a line of sight and <strong>magnetic north</strong>. Compass surveys are used for:</p><ul>\n  <li><strong>Reconnaissance</strong> — quickly sketching site conditions before a full instrument survey</li>\n  <li><strong>Preliminary surveys</strong> — rough mapping for planning purposes</li>\n  <li><strong>Checking angles</strong> — independent field verification of total station readings</li>\n  <li><strong>Forestry and natural-resource work</strong> — where extreme precision is not required</li>\n</ul><h4>Types of Surveying Compasses</h4>"}'::jsonb, 2, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'table', '{"headers":["Type","Description","Typical Use"],"rows":[["<strong>Surveyor''s Compass</strong>","Mounted on a tripod with sighting vanes (slits). Reads bearings directly on a graduated circle. Historically used for boundary and land surveys in colonial America.","Historical / educational demonstrations"],["<strong>Prismatic Compass</strong>","Hand-held with a prism that lets the user read the bearing while simultaneously sighting the target. Common in military and geological fieldwork.","Military, geology, rough mapping"],["<strong>Hand/Pocket Compass (e.g., SUUNTO KB-14/360)</strong>","Small, portable, liquid-dampened capsule. Reads directly in 0°–360° (azimuth) or quadrant bearings. Accuracy typically ±0.5° to ±1°.","Reconnaissance, forestry, quick field checks"]]}'::jsonb, 3, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<p>All compasses share a limitation: they measure from <strong>magnetic north</strong>, which differs from <strong>true (geographic) north</strong> by an amount called <strong>declination</strong>. We will address this shortly.</p>"}'::jsonb, 4, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'divider', '{}'::jsonb, 5, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h3>2. Bearings</h3><p>A <strong>bearing</strong> expresses the direction of a line as an acute angle measured from either north or south toward east or west. The format is always:</p>"}'::jsonb, 6, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'callout', '{"type":"formula","text":"<strong>N/S &lt;angle&gt; E/W</strong>"}'::jsonb, 7, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<p>Rules:</p><ul>\n  <li>The angle is always between <strong>0° and 90°</strong>.</li>\n  <li>The first letter is always <strong>N</strong> or <strong>S</strong> (the reference meridian).</li>\n  <li>The last letter is always <strong>E</strong> or <strong>W</strong> (the direction of rotation from the meridian).</li>\n</ul><h4>Examples</h4><ul>\n  <li>A line pointing northeast at 45° from north → <strong>N 45°00'' E</strong></li>\n  <li>A line pointing south-southeast at 20° from south toward east → <strong>S 20°00'' E</strong></li>\n  <li>Due east → <strong>N 90°00'' E</strong> (or equivalently S 90°00'' E)</li>\n  <li>Due north → <strong>N 00°00'' E</strong> (or N 00°00'' W — the angle is zero)</li>\n</ul>"}'::jsonb, 8, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'divider', '{}'::jsonb, 9, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h3>3. Azimuths</h3><p>An <strong>azimuth</strong> is the direction of a line measured as a clockwise angle from north, ranging from <strong>0° to 360°</strong>. Azimuths are unambiguous — every direction has exactly one azimuth value.</p>"}'::jsonb, 10, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'callout', '{"type":"formula","text":"<strong>Azimuth: 0° (North) → 90° (East) → 180° (South) → 270° (West) → 360°/0° (North)</strong>"}'::jsonb, 11, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h4>Converting Bearing to Azimuth</h4>"}'::jsonb, 12, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'table', '{"headers":["Quadrant","Bearing Format","Azimuth Formula","Example"],"rows":[["<strong>NE</strong>","N θ E","Az = θ","N 45°00'' E → Az = <strong>45°</strong>"],["<strong>SE</strong>","S θ E","Az = 180° − θ","S 30°00'' E → Az = 180° − 30° = <strong>150°</strong>"],["<strong>SW</strong>","S θ W","Az = 180° + θ","S 45°00'' W → Az = 180° + 45° = <strong>225°</strong>"],["<strong>NW</strong>","N θ W","Az = 360° − θ","N 60°00'' W → Az = 360° − 60° = <strong>300°</strong>"]]}'::jsonb, 13, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h4>Converting Azimuth to Bearing</h4><ul>\n  <li><strong>0°–90°</strong> (NE quadrant): Bearing = N (azimuth)° E. Example: Az 35° → N 35°00'' E</li>\n  <li><strong>90°–180°</strong> (SE quadrant): Bearing = S (180° − azimuth)° E. Example: Az 150° → S 30°00'' E</li>\n  <li><strong>180°–270°</strong> (SW quadrant): Bearing = S (azimuth − 180°)° W. Example: Az 225° → S 45°00'' W</li>\n  <li><strong>270°–360°</strong> (NW quadrant): Bearing = N (360° − azimuth)° W. Example: Az 300° → N 60°00'' W</li>\n</ul>"}'::jsonb, 14, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'divider', '{}'::jsonb, 15, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h3>4. Fore Bearings and Back Bearings</h3><p>Every survey line has two directions: the <strong>fore bearing</strong> (direction of travel) and the <strong>back bearing</strong> (the reverse direction). To find the back bearing from a fore bearing, simply reverse both letters:</p>"}'::jsonb, 16, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'callout', '{"type":"formula","text":"<strong>Back Bearing: swap N↔S and E↔W</strong>"}'::jsonb, 17, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h4>Examples</h4><ul>\n  <li>Fore bearing = N 35°20'' E → Back bearing = <strong>S 35°20'' W</strong></li>\n  <li>Fore bearing = S 72°45'' W → Back bearing = <strong>N 72°45'' E</strong></li>\n</ul><p>For azimuths, the back azimuth is obtained by adding or subtracting 180°:</p>"}'::jsonb, 18, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'callout', '{"type":"formula","text":"<strong>Back Azimuth = Azimuth ± 180°</strong><br>\n  (Add 180° if azimuth &lt; 180°; subtract 180° if azimuth ≥ 180°)"}'::jsonb, 19, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<p>Example: Az = 45° → Back Az = 45° + 180° = <strong>225°</strong>. Az = 300° → Back Az = 300° − 180° = <strong>120°</strong>.</p>"}'::jsonb, 20, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'divider', '{}'::jsonb, 21, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h3>5. Magnetic Declination</h3><p><strong>Magnetic declination</strong> (also called <em>variation</em>) is the angle between <strong>true north</strong> (geographic north pole) and <strong>magnetic north</strong> (where the compass needle points). The Earth''s magnetic pole does not coincide with the geographic pole, and its position slowly changes over time.</p><ul>\n  <li><strong>East declination</strong>: Magnetic north is <em>east</em> of true north. The compass needle points to the right of true north.</li>\n  <li><strong>West declination</strong>: Magnetic north is <em>west</em> of true north. The compass needle points to the left of true north.</li>\n</ul><h4>Correction Formula</h4>"}'::jsonb, 22, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'callout', '{"type":"formula","text":"<strong>True Bearing = Magnetic Bearing + East Declination</strong><br>\n  <strong>True Bearing = Magnetic Bearing − West Declination</strong>"}'::jsonb, 23, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<p>Or more concisely: <strong>True = Magnetic + Declination</strong> (treating east as positive and west as negative).</p><h4>Example</h4><p>A compass reads N 40°00'' E. The local declination is 3° East.</p><p>True bearing = 40° + 3° = <strong>N 43°00'' E</strong>.</p><p>Lines connecting points of equal declination are called <strong>isogonic lines</strong>. The line where declination is zero is the <strong>agonic line</strong>. Texas currently has approximately <strong>2°–4° east declination</strong>, meaning magnetic north points slightly east of true north across most of the state.</p>"}'::jsonb, 24, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'divider', '{}'::jsonb, 25, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h3>6. The SUUNTO KB-14/360</h3><p>The <strong>SUUNTO KB-14/360</strong> is a hand-held sighting compass widely used in forestry, reconnaissance surveying, and field checks. Key features:</p><ul>\n  <li>Reads directly in <strong>degrees 0°–360°</strong> (azimuth format)</li>\n  <li><strong>Liquid-dampened capsule</strong> — the needle settles quickly, even in windy conditions</li>\n  <li>Accuracy: <strong>±0.5°</strong> (±30'')</li>\n  <li>Compact and lightweight — fits in a shirt pocket</li>\n  <li>Sighting through a notch/window while reading the bearing through a lens</li>\n</ul><p>The KB-14/360 is not a precision instrument — it cannot replace a total station for boundary work — but it is invaluable for quick directional checks, reconnaissance, and confirming that your total station readings are in the correct quadrant.</p>"}'::jsonb, 26, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'divider', '{}'::jsonb, 27, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h3>7. DD and DMS Conversions</h3><p>Angles can be expressed in two common formats:</p><ul>\n  <li><strong>Decimal Degrees (DD)</strong>: e.g., 47.8° — used by calculators and software</li>\n  <li><strong>Degrees-Minutes-Seconds (DMS)</strong>: e.g., 47°48''00\" — used in field notes and legal descriptions</li>\n</ul><p>There are 60 minutes in a degree and 60 seconds in a minute (just like hours on a clock).</p><h4>DD → DMS Conversion</h4><ol>\n  <li>The whole-number part is the <strong>degrees</strong>.</li>\n  <li>Multiply the decimal part by 60 — the whole-number result is the <strong>minutes</strong>.</li>\n  <li>Multiply the remaining decimal of the minutes by 60 — the result is the <strong>seconds</strong>.</li>\n</ol><h4>Worked Example 1: 47.8°</h4><ul>\n  <li>Degrees = 47°</li>\n  <li>0.8 × 60 = 48.0'' → Minutes = 48''</li>\n  <li>0.0 × 60 = 0\" → Seconds = 00\"</li>\n  <li><strong>Answer: 47°48''00\"</strong></li>\n</ul><h4>Worked Example 2: 345.678°</h4><ul>\n  <li>Degrees = 345°</li>\n  <li>0.678 × 60 = 40.68'' → Minutes = 40''</li>\n  <li>0.68 × 60 = 40.8\" → Seconds ≈ 41\"</li>\n  <li><strong>Answer: 345°40''41\"</strong></li>\n</ul><h4>DMS → DD Conversion</h4>"}'::jsonb, 28, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'callout', '{"type":"formula","text":"<strong>DD = Degrees + Minutes/60 + Seconds/3600</strong>"}'::jsonb, 29, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h4>Worked Example 3: 43°12''15\"</h4><ul>\n  <li>DD = 43 + 12/60 + 15/3600</li>\n  <li>DD = 43 + 0.2000 + 0.004167</li>\n  <li><strong>Answer: 43.2042°</strong></li>\n</ul><h4>Worked Example 4: 128°45''30\"</h4><ul>\n  <li>DD = 128 + 45/60 + 30/3600</li>\n  <li>DD = 128 + 0.7500 + 0.008333</li>\n  <li><strong>Answer: 128.7583°</strong></li>\n</ul><p><strong>Tip:</strong> Always sanity-check your conversion. If you start with 47.8° (less than 48°), your DMS result should be 47-something — never 48°. If you start with 43°12'', your DD should be between 43.2 and 43.3.</p>"}'::jsonb, 30, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'divider', '{}'::jsonb, 31, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<h3>8. Chaining Corrections Review</h3><p>From Week 1, recall the three systematic corrections applied to steel-tape measurements:</p>"}'::jsonb, 32, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'callout', '{"type":"formula","text":"<strong>C<sub>t</sub> = 0.00000645 × (T<sub>F</sub> − 68) × L</strong> &nbsp; (Temperature)<br><br>\n  <strong>C<sub>p</sub> = (P − P<sub>s</sub>) × L / (A × E)</strong> &nbsp; (Tension)<br><br>\n  <strong>C<sub>s</sub> = −w² × L³ / (24 × P²)</strong> &nbsp; (Sag — always negative)"}'::jsonb, 33, now(), now()),
  (gen_random_uuid(), 'acc03b02-0000-0000-0000-000000000001', 'text', '{"html":"<p>Corrected distance = Measured + C<sub>t</sub> + C<sub>p</sub> + C<sub>s</sub>. Each correction has its own sign.</p><p>Key reminders: Temperature correction is positive above 68°F and negative below. Tension correction is positive when over-pulling. Sag correction is <strong>always negative</strong> because the catenary arc is longer than the chord.</p>"}'::jsonb, 34, now(), now());

-- Mark lesson as migrated (original HTML preserved as fallback)
UPDATE learning_lessons SET content_migrated = TRUE WHERE id = 'acc03b02-0000-0000-0000-000000000001';
